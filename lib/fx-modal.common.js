!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vuex")):"function"==typeof define&&define.amd?define(["vuex"],t):"object"==typeof exports?exports["fx-modal"]=t(require("vuex")):e["fx-modal"]=t(e.vuex)}("undefined"!=typeof self?self:this,(function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,t){function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=o=function(e){return typeof e}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}e.exports=o},function(e,t){e.exports=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},function(t,o){t.exports=e},function(e,t,o){"use strict";var n=o(5);o.n(n).a},function(e,t,o){"use strict";o.r(t);var n=o(0),i=o.n(n),l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"fx-modals"},e._l(e.modal_list,(function(t){return o("el-dialog",{directives:[{name:"drag",rawName:"v-drag"},{name:"initSize",rawName:"v-initSize",value:t,expression:"modal"}],key:t.id,attrs:{"custom-class":e.getCustomClass(t),modal:t.mask,top:"0",title:t.title,visible:t.visible,"append-to-body":t.appendToBody,"mask-append-to-body":t.maskAppendToBody,destroyOnClose:t.destroyOnClose,closeOnClickModal:t.closeOnClickMask,fullscreen:t.fullscreen,"before-close":e.getBeforeClose(t),lockScroll:t.lockScroll},on:{close:function(o){return e.onClose(t)},closed:function(o){return e.onClosed(t)}}},[o("div",{staticClass:"fx-modal__body"},[o(t.component,e._g(e._b({ref:"modalComponent_"+t.id,refInFor:!0,tag:"component"},"component",t.data,!1),t.actions))],1),e._v(" "),t.btns&&t.btns.length?o("div",{staticClass:"fx-modal__footer",attrs:{slot:"footer"},slot:"footer"},e._l(t.btns,(function(n,i){return o("el-button",{key:i,attrs:{size:n.size,type:n.type,icon:n.icon},on:{click:function(o){return e.onModalBtnClick(n,t)}}},[e._v(e._s(n.name))])})),1):e._e()])})),1)};l._withStripped=!0;var r=o(1),c=o.n(r),s=o(2);function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var d={directives:{drag:{bind:function(e,t,o,n){var i=!1,l=0,r=0,c=e.querySelector(".el-dialog__header"),s=e.querySelector(".el-dialog");s.style.overflow="auto",c.style.cursor="move";var a=s.currentStyle||window.getComputedStyle(s,null),d=function(e){var t,o,n=e.clientX-c.offsetLeft,i=e.clientY-c.offsetTop;a.left.includes("%")?(t=+document.body.clientWidth*(+a.left.replace(/\%/g,"")/100),o=+document.body.clientHeight*(+a.top.replace(/\%/g,"")/100)):(t=+a.left.replace(/\px/g,""),o=+a.top.replace(/\px/g,"")),document.onmousemove=function(e){var l=e.clientX-n,r=e.clientY-i;s.style.left="".concat(l+t,"px"),s.style.top="".concat(r+o,"px")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}};c.onmousedown=d,c.ondblclick=function(e){0==i?(s.clientHeight,l=s.clientWidth,r=s.style.marginTop,s.style.left=0,s.style.top=0,s.style.height="100VH",s.style.width="100VW",s.style.marginTop=0,i=!0,c.style.cursor="initial",c.onmousedown=null):(s.style.height="auto",s.style.width=l+"px",s.style.marginTop=r,i=!1,c.style.cursor="move",c.onmousedown=d)},s.onmousemove=function(t){t.clientX>s.offsetLeft+s.clientWidth-10||s.offsetLeft+10>t.clientX?s.style.cursor="w-resize":e.scrollTop+t.clientY>s.offsetTop+s.clientHeight-10?s.style.cursor="s-resize":(s.style.cursor="default",s.onmousedown=null),s.onmousedown=function(t){var o=t.clientX,n=t.clientY,i=s.clientWidth,l=s.clientHeight,r=s.offsetLeft,c=s.offsetTop;s.style.userSelect="none";var a=e.scrollTop;o>r&&o<r+i&&n>c&&n<c+100||(document.onmousemove=function(e){e.preventDefault(),o>r&&o<r+10&&(o>e.clientX&&(s.style.width=i+(o-e.clientX)+"px"),o<e.clientX&&(s.clientWidth<120||(s.style.width=i-(e.clientX-o)+"px"))),o>r+i-10&&o<r+i&&(o>e.clientX&&(s.clientWidth<120||(s.style.width=i-(o-e.clientX)+"px")),o<e.clientX&&(s.style.width=i+(e.clientX-o)+"px")),a+n>c+l-20&&a+n<c+l&&(n>e.clientY&&(s.clientHeight<120||(s.style.height=l-(n-e.clientY)+"px")),n<e.clientY&&(s.style.height=l+(e.clientY-n)+"px"))},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null})}}}},initSize:{bind:function(e,t,o,n){var i=document.body.clientHeight,l=document.body.clientWidth,r=t.value,c=r.placement,s=r.height,a=r.width;"string"==typeof s&&s.includes("%")&&(s=i*(+s.replace(/\%/g,"")/100)),"string"==typeof a&&a.includes("%")&&(a=l*(+a.replace(/\%/g,"")/100)),a>l&&(a=l);var d=e.querySelector(".el-dialog");d.style.width=a+"px",d.style.height=s+"px";var u="5vh",f=(l-a)/2+"px";"center"===c&&s&&(u=(i-s)/2+"px"),d.style.left=f,d.style.top=u}}},data:function(){return{globalDialog:{title:"Global Dialog",visible:!1}}},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){c()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},Object(s.mapState)({modal_list:function(e){return e.fxModal.modal_list}})),methods:{getCustomClass:function(e){var t="fx-modal ",o=e.placement,n=void 0===o?"center":o,i=e.classes;return i&&(t+="".concat(i," ")),t+="placement--".concat(n," ")},onClose:function(e){this.$store.dispatch("fxModal/close",e.id)},onClosed:function(e){this.$store.dispatch("fxModal/remove",e.id)},getBeforeClose:function(e){var t=this;return function(o){e.beforeClose?e.beforeClose(o,t.$refs["modalComponent_".concat(e.id)][0]):o()}},onModalBtnClick:function(e,t){var o=e.method,n=e.callback;if(!o)return this.onClose(t),void(n&&n.call());var i=this.$refs["modalComponent_".concat(t.id)][0];i&&i[o]&&"function"==typeof i[o]&&(i[o].call(null,n)&&this.onClose(t))}},created:function(){}};o(3);var u=function(e,t,o,n,i,l,r,c){var s,a="function"==typeof e?e.options:e;if(t&&(a.render=t,a.staticRenderFns=o,a._compiled=!0),n&&(a.functional=!0),l&&(a._scopeId="data-v-"+l),r?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},a._ssrRegister=s):i&&(s=c?function(){i.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:i),s)if(a.functional){a._injectStyles=s;var d=a.render;a.render=function(e,t){return s.call(t),d(e,t)}}else{var u=a.beforeCreate;a.beforeCreate=u?[].concat(u,s):[s]}return{exports:e,options:a}}(d,l,[],!1,null,null,null);u.options.__file="src/FxModal.vue";var f=u.exports;function p(e){for(var t=1,o=arguments.length;t<o;t++){var n=arguments[t]||{};for(var i in n)if(n.hasOwnProperty(i)){var l=n[i];void 0!==l&&(e[i]=l)}}return e}window.merge=p;var m={mask:!0,btns:[{name:"关闭"}],data:null,title:"",width:"50%",height:"",placement:"center",actions:null,beforeClose:null,open:!0,fullscreen:!1,destroyOnClose:!1,appendToBody:!1,maskAppendToBody:!0,lockScroll:!0,closeOnClickMask:!0,classes:""};function y(e,t){return t.modal_list[e]||null}function v(e,t){return t.modal_list.findIndex((function(t){return t.id===e}))}function h(e,t){return t.modal_list.findIndex((function(t){return e===t}))}f.install=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.store,n=t.defaultOptions,l=0;e.component(f.name||"FxModal",f),e.FxModal_defaultOptions=p(m,n);try{o.registerModule("fxModal",{namespaced:!0,state:{modal_list:[]},mutations:{ADD_MODAL:function(e,t){e.modal_list.push(t)},UPDATE_MODAL:function(e,t){var o=t.modal,n=t.index,i=e.modal_list[n];for(var l in i)i[l]=o[l]},DELETE_MODAL:function(e,t){e.modal_list.splice(t,1)},DELETE_ALL_MODAL:function(e){e.modal_list=[]},SET_COMPONENT:function(e,t){var o=t.index,n=t.component,i=y(o,e);i&&(i.component=n)},SET_DATA:function(e,t){var o=t.index,n=t.data,i=y(o,e);i&&(i.data=n)},SET_TITLE:function(e,t){var o=t.index,n=t.title,i=y(o,e);i&&(i.title=n)},SET_VISIBLE:function(e,t){var o=t.index,n=t.visible,i=y(o,e);i&&(i.visible=n)},SET_ACTIONS:function(e,t){var o=t.index,n=t.actions,i=y(o,e);i&&(i.actions=n)}},actions:{add:function(e,t){var o=e.commit,n=e.state.modal_list.findIndex((function(e){return e.id===t.id}));n<0?o("ADD_MODAL",t):(!0===t.openImmediately&&(t.visible=!0),o("UPDATE_MODAL",{modal:t,index:n}))},open:function(e,t){(0,e.commit)("SET_VISIBLE",{index:h(t,e.state),visible:!0})},close:function(e,t){var o=e.commit,n=v(t,e.state);n>=0&&o("SET_VISIBLE",{index:n,visible:!1})},remove:function(e,t){var o=e.commit,n=v(t,e.state);n>=0&&(o("SET_COMPONENT",{index:n,component:null}),o("SET_TITLE",{index:n,title:null}),o("SET_ACTIONS",{index:n,actions:[]}),o("SET_DATA",{index:n,data:null}),o("DELETE_MODAL",n))},removeAll:function(e){(0,e.commit)("DELETE_ALL_MODAL")}}})}catch(e){throw new Error("store不是[Vuex.Store]的实例",e)}if(!o)throw new Error("必须提供store才能初始化FxModal");e.prototype.$modal=function(t,n){var i=p(e.FxModal_defaultOptions,t),r=i.component,c=i.data,s=i.title,a=i.id,d=i.width,u=i.height,f=i.closeOnClickMask,m=i.placement,y=i.lockScroll,v=i.fullscreen,h=i.classes,b=i.actions,_=i.appendToBody,x=(i.closeOnClickModal,i.maskAppendToBody),g=i.btns,O=i.beforeClose,S=i.open,T=i.mask;if(n&&(O&&(O=O.bind(n)),b)){var C={};for(var E in b){var w=b[E];C[E]=w.bind(n)}b=C}var M={id:a||l++,component:r,data:c,title:s,width:d,height:u,placement:m,visible:!1,openImmediately:S,actions:b,btns:g,beforeClose:O,mask:T,appendToBody:_,maskAppendToBody:x,fullscreen:v,classes:h,closeOnClickMask:f,lockScroll:y};return o.dispatch("fxModal/add",M),!0===S&&e.nextTick((function(){o.dispatch("fxModal/open",M)})),{instance:M,close:function(){o.dispatch("fxModal/close",M.id)},open:function(){o.dispatch("fxModal/open",M)}}},e.prototype.$modal.close=function(e){e="object"===i()(e)&&e.instance?e.instance.id:e,o.dispatch("fxModal/close",e)},e.prototype.$modal.closeAll=function(){o.dispatch("fxModal/removeAll")},e.prototype.$modal.get=function(e){var t=o.state.modal.modal_list.find((function(t){return t.id===e}));return t?{instance:t,close:function(){o.dispatch("fxModal/close",t.id)}}:null}};t.default=f},function(e,t){}])}));