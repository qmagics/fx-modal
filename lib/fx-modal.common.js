!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vuex")):"function"==typeof define&&define.amd?define(["vuex"],t):"object"==typeof exports?exports["fx-modal"]=t(require("vuex")):e["fx-modal"]=t(e.vuex)}("undefined"!=typeof self?self:this,(function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(t,n){t.exports=e},function(e,t,n){"use strict";var o=n(5);n.n(o).a},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fx-modals"},e._l(e.modal_list,(function(t){return n("el-dialog",{directives:[{name:"drag",rawName:"v-drag"},{name:"initSize",rawName:"v-initSize",value:t,expression:"modal"}],key:t.id,attrs:{"custom-class":e.getCustomClass(t),modal:t.mask,top:"0",title:t.title,visible:t.visible,"append-to-body":t.appendToBody,"mask-append-to-body":t.maskAppendToBody,destroyOnClose:t.destroyOnClose,closeOnClickModal:t.closeOnClickMask,fullscreen:t.fullscreen,"before-close":e.getBeforeClose(t),lockScroll:t.lockScroll},on:{close:function(n){return e.onClose(t)},closed:function(n){return e.onClosed(t)}}},[n("div",{staticClass:"fx-modal__body"},[n(t.component,e._g(e._b({ref:"modalComponent_"+t.id,refInFor:!0,tag:"component"},"component",t.data,!1),t.actions))],1),e._v(" "),t.btns&&t.btns.length?n("div",{staticClass:"fx-modal__footer",attrs:{slot:"footer"},slot:"footer"},e._l(t.btns,(function(o,i){return n("el-button",{key:i,attrs:{size:o.size,type:o.type,icon:o.icon},on:{click:function(n){return e.onModalBtnClick(o,t)}}},[e._v(e._s(o.name))])})),1):e._e()])})),1)};l._withStripped=!0;var r=n(1),c=n.n(r),s=n(2);function a(e){return e.currentStyle||window.getComputedStyle(e,null)}function d(e,t){e.style.transition=t?"all 0.2s ease":"none"}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var f={directives:{drag:{bind:function(e,t,n,o){var i=!1,l=0,r=0,c=0,s=0,u=e.querySelector(".el-dialog__header"),f=e.querySelector(".el-dialog");f.style.overflow="auto",u.style.cursor="move";var p=a(f),m=function(e){var t,n,o=e.clientX-u.offsetLeft,i=e.clientY-u.offsetTop;p.left.includes("%")?(t=+document.body.clientWidth*(+p.left.replace(/\%/g,"")/100),n=+document.body.clientHeight*(+p.top.replace(/\%/g,"")/100)):(t=+p.left.replace(/\px/g,""),n=+p.top.replace(/\px/g,"")),document.onmousemove=function(e){d(f,!1);var l=e.clientX-o,r=e.clientY-i;f.style.left="".concat(l+t,"px"),f.style.top="".concat(r+n,"px")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}};u.onmousedown=m,u.ondblclick=function(e){if(d(f,!0),0==i){var t=a(f),n=t.width,o=t.height,p=t.left,y=t.top;c=y,s=p,r=o,l=n,f.style.left=0,f.style.top=0,f.style.height="100VH",f.style.width="100VW",f.style.marginTop=0,i=!0,u.style.cursor="initial",u.onmousedown=null}else f.style.height=r,f.style.width=l,f.style.left=s,f.style.top=c,i=!1,u.style.cursor="move",u.onmousedown=m},f.onmousemove=function(t){d(f,!1),t.clientX>f.offsetLeft+f.clientWidth-10||f.offsetLeft+10>t.clientX?f.style.cursor="w-resize":e.scrollTop+t.clientY>f.offsetTop+f.clientHeight-10?f.style.cursor="s-resize":(f.style.cursor="default",f.onmousedown=null),f.onmousedown=function(t){var n=t.clientX,o=t.clientY,i=f.clientWidth,l=f.clientHeight,r=f.offsetLeft,c=f.offsetTop,s=e.scrollTop;n>r&&n<r+i&&o>c&&o<c+100||(document.onmousemove=function(e){e.preventDefault(),n>r&&n<r+10&&(n>e.clientX&&(f.style.width=i+(n-e.clientX)+"px"),n<e.clientX&&(f.clientWidth<120||(f.style.width=i-(e.clientX-n)+"px"))),n>r+i-10&&n<r+i&&(n>e.clientX&&(f.clientWidth<120||(f.style.width=i-(n-e.clientX)+"px")),n<e.clientX&&(f.style.width=i+(e.clientX-n)+"px")),s+o>c+l-20&&s+o<c+l&&(o>e.clientY&&(f.clientHeight<120||(f.style.height=l-(o-e.clientY)+"px")),o<e.clientY&&(f.style.height=l+(e.clientY-o)+"px"))},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null})}}}},initSize:{bind:function(e,t,n,o){var i=document.body.clientHeight,l=document.body.clientWidth,r=t.value,c=r.placement,s=r.height,a=r.width;"string"==typeof s&&s.includes("%")&&(s=i*(+s.replace(/\%/g,"")/100)),"string"==typeof a&&a.includes("%")&&(a=l*(+a.replace(/\%/g,"")/100)),a>l&&(a=l);var d=e.querySelector(".el-dialog");d.style.width=a+"px",d.style.height=s+"px";var u="5vh",f=(l-a)/2+"px";"center"===c&&s&&(u=(i-s)/2+"px"),d.style.left=f,d.style.top=u}}},data:function(){return{}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(s.mapState)({modal_list:function(e){return e.fxModal.modal_list}})),methods:{getCustomClass:function(e){var t="fx-modal ",n=e.placement,o=void 0===n?"center":n,i=e.classes;return i&&(t+="".concat(i," ")),t+="placement--".concat(o," ")},onClose:function(e){this.$store.dispatch("fxModal/close",e.id)},onClosed:function(e){this.$store.dispatch("fxModal/remove",e.id)},getBeforeClose:function(e){var t=this;return function(n){e.beforeClose?e.beforeClose(n,t.$refs["modalComponent_".concat(e.id)][0]):n()}},onModalBtnClick:function(e,t){var n=e.method,o=e.callback;if(!n)return this.onClose(t),void(o&&o.call());var i=this.$refs["modalComponent_".concat(t.id)][0];i&&i[n]&&"function"==typeof i[n]&&(i[n].call(null,o)&&this.onClose(t))}},created:function(){}};n(3);var p=function(e,t,n,o,i,l,r,c){var s,a="function"==typeof e?e.options:e;if(t&&(a.render=t,a.staticRenderFns=n,a._compiled=!0),o&&(a.functional=!0),l&&(a._scopeId="data-v-"+l),r?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},a._ssrRegister=s):i&&(s=c?function(){i.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:i),s)if(a.functional){a._injectStyles=s;var d=a.render;a.render=function(e,t){return s.call(t),d(e,t)}}else{var u=a.beforeCreate;a.beforeCreate=u?[].concat(u,s):[s]}return{exports:e,options:a}}(f,l,[],!1,null,null,null);p.options.__file="src/FxModal.vue";var m=p.exports;function y(e){for(var t=1,n=arguments.length;t<n;t++){var o=arguments[t]||{};for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];void 0!==l&&(e[i]=l)}}return e}window.merge=y;var v={mask:!0,btns:[{name:"关闭"}],data:null,title:"",width:"50%",height:"",placement:"center",actions:null,beforeClose:null,open:!0,fullscreen:!1,destroyOnClose:!1,appendToBody:!1,maskAppendToBody:!0,lockScroll:!0,closeOnClickMask:!0,classes:""};function h(e,t){return t.modal_list[e]||null}function _(e,t){return t.modal_list.findIndex((function(t){return t.id===e}))}function b(e,t){return t.modal_list.findIndex((function(t){return e===t}))}m.install=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.store,o=t.defaultOptions,l=0;e.component(m.name||"FxModal",m),e.FxModal_defaultOptions=y(v,o);try{n.registerModule("fxModal",{namespaced:!0,state:{modal_list:[]},mutations:{ADD_MODAL:function(e,t){e.modal_list.push(t)},UPDATE_MODAL:function(e,t){var n=t.modal,o=t.index,i=e.modal_list[o];for(var l in i)i[l]=n[l]},DELETE_MODAL:function(e,t){e.modal_list.splice(t,1)},DELETE_ALL_MODAL:function(e){e.modal_list=[]},SET_COMPONENT:function(e,t){var n=t.index,o=t.component,i=h(n,e);i&&(i.component=o)},SET_DATA:function(e,t){var n=t.index,o=t.data,i=h(n,e);i&&(i.data=o)},SET_TITLE:function(e,t){var n=t.index,o=t.title,i=h(n,e);i&&(i.title=o)},SET_VISIBLE:function(e,t){var n=t.index,o=t.visible,i=h(n,e);i&&(i.visible=o)},SET_ACTIONS:function(e,t){var n=t.index,o=t.actions,i=h(n,e);i&&(i.actions=o)}},actions:{add:function(e,t){var n=e.commit,o=e.state.modal_list.findIndex((function(e){return e.id===t.id}));o<0?n("ADD_MODAL",t):(!0===t.openImmediately&&(t.visible=!0),n("UPDATE_MODAL",{modal:t,index:o}))},open:function(e,t){(0,e.commit)("SET_VISIBLE",{index:b(t,e.state),visible:!0})},close:function(e,t){var n=e.commit,o=_(t,e.state);o>=0&&n("SET_VISIBLE",{index:o,visible:!1})},remove:function(e,t){var n=e.commit,o=_(t,e.state);o>=0&&(n("SET_COMPONENT",{index:o,component:null}),n("SET_TITLE",{index:o,title:null}),n("SET_ACTIONS",{index:o,actions:[]}),n("SET_DATA",{index:o,data:null}),n("DELETE_MODAL",o))},removeAll:function(e){(0,e.commit)("DELETE_ALL_MODAL")}}})}catch(e){throw new Error("store不是[Vuex.Store]的实例",e)}if(!n)throw new Error("必须提供store才能初始化FxModal");e.prototype.$modal=function(t,o){var i=y(e.FxModal_defaultOptions,t),r=i.component,c=i.data,s=i.title,a=i.id,d=i.width,u=i.height,f=i.closeOnClickMask,p=i.placement,m=i.lockScroll,v=i.fullscreen,h=i.classes,_=i.actions,b=i.appendToBody,x=(i.closeOnClickModal,i.maskAppendToBody),g=i.btns,O=i.beforeClose,S=i.open,T=i.mask;if(o&&(O&&(O=O.bind(o)),_)){var C={};for(var E in _){var w=_[E];C[E]=w.bind(o)}_=C}var M={id:a||l++,component:r,data:c,title:s,width:d,height:u,placement:p,visible:!1,openImmediately:S,actions:_,btns:g,beforeClose:O,mask:T,appendToBody:b,maskAppendToBody:x,fullscreen:v,classes:h,closeOnClickMask:f,lockScroll:m};return n.dispatch("fxModal/add",M),!0===S&&e.nextTick((function(){n.dispatch("fxModal/open",M)})),{instance:M,close:function(){n.dispatch("fxModal/close",M.id)},open:function(){n.dispatch("fxModal/open",M)}}},e.prototype.$modal.close=function(e){e="object"===i()(e)&&e.instance?e.instance.id:e,n.dispatch("fxModal/close",e)},e.prototype.$modal.closeAll=function(){n.dispatch("fxModal/removeAll")},e.prototype.$modal.get=function(e){var t=n.state.modal.modal_list.find((function(t){return t.id===e}));return t?{instance:t,close:function(){n.dispatch("fxModal/close",t.id)}}:null}};t.default=m},function(e,t){}])}));