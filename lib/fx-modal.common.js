!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("vuex")):"function"==typeof define&&define.amd?define(["vuex"],e):"object"==typeof exports?exports["fx-modal"]=e(require("vuex")):t["fx-modal"]=e(t.vuex)}("undefined"!=typeof self?self:this,(function(t){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(e,n){e.exports=t},function(t,e,n){"use strict";var o=n(5);n.n(o).a},function(t,e,n){"use strict";n.r(e);var o=n(0),i=n.n(o),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fx-modals"},t._l(t.modal_list,(function(e){return n("el-dialog",{key:e.id,attrs:{"custom-class":"fx-modal",modal:e.mask,title:e.title,visible:e.visible,width:t.getModalWidth(e),"before-close":t.getBeforeClose(e)},on:{close:function(n){return t.onClose(e)},closed:function(n){return t.onClosed(e)}}},[n("div",{staticClass:"fx-modal__body"},[n(e.component,t._g(t._b({ref:"modalComponent_"+e.id,refInFor:!0,tag:"component"},"component",e.data,!1),e.actions))],1),t._v(" "),e.btns&&e.btns.length?n("div",{staticClass:"fx-modal__footer",attrs:{slot:"footer"},slot:"footer"},t._l(e.btns,(function(o,i){return n("el-button",{key:i,attrs:{size:"mini",type:o.type},on:{click:function(n){return t.onModalBtnClick(o,e)}}},[t._v(t._s(o.name))])})),1):t._e()])})),1)};r._withStripped=!0;var l=n(1),a=n.n(l),c=n(2);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var d={data:function(){return{globalDialog:{title:"Global Dialog",visible:!1}}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(c.mapState)({modal_list:function(t){return t.fxModal.modal_list}})),methods:{getModalWidth:function(t){var e=t.width,n=t.placement;return e||("top-right"===n?"25vw":"45vw")},onClose:function(t){this.$store.dispatch("fxModal/close",t.id)},onClosed:function(t){this.$store.dispatch("fxModal/remove",t.id)},getBeforeClose:function(t){var e=this;return function(n){t.beforeClose?t.beforeClose(n,e.$refs["modalComponent_".concat(t.id)][0]):n()}},onModalBtnClick:function(t,e){var n=t.method,o=t.callback;if(n){var i=this.$refs["modalComponent_".concat(e.id)][0];i&&i[n]&&i[n].call(null,o)}else this.onClose(e)}},created:function(){}};n(3);var f=function(t,e,n,o,i,r,l,a){var c,s="function"==typeof t?t.options:t;if(e&&(s.render=e,s.staticRenderFns=n,s._compiled=!0),o&&(s.functional=!0),r&&(s._scopeId="data-v-"+r),l?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},s._ssrRegister=c):i&&(c=a?function(){i.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(s.functional){s._injectStyles=c;var d=s.render;s.render=function(t,e){return c.call(e),d(t,e)}}else{var f=s.beforeCreate;s.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:s}}(d,r,[],!1,null,"f8f378dc",null);f.options.__file="src/FxModal.vue";var u=f.exports;function p(t,e){return e.modal_list[t]||null}function m(t,e){return e.modal_list.findIndex((function(e){return e.id===t}))}function _(t,e){return e.modal_list.findIndex((function(e){return t===e}))}u.install=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(u.name||"FxModal",u);var n=e.store,o=0;try{n.registerModule("fxModal",{namespaced:!0,state:{modal_list:[]},mutations:{ADD_MODAL:function(t,e){t.modal_list.push(e)},UPDATE_MODAL:function(t,e){var n=e.modal,o=e.index,i=t.modal_list[o];for(var r in i)i[r]=n[r]},DELETE_MODAL:function(t,e){t.modal_list.splice(e,1)},DELETE_ALL_MODAL:function(t){t.modal_list=[]},SET_COMPONENT:function(t,e){var n=e.index,o=e.component,i=p(n,t);i&&(i.component=o)},SET_DATA:function(t,e){var n=e.index,o=e.data,i=p(n,t);i&&(i.data=o)},SET_TITLE:function(t,e){var n=e.index,o=e.title,i=p(n,t);i&&(i.title=o)},SET_VISIBLE:function(t,e){var n=e.index,o=e.visible,i=p(n,t);i&&(i.visible=o)},SET_ACTIONS:function(t,e){var n=e.index,o=e.actions,i=p(n,t);i&&(i.actions=o)}},actions:{add:function(t,e){var n=t.commit,o=t.state.modal_list.findIndex((function(t){return t.id===e.id}));o<0?n("ADD_MODAL",e):(!0===e.openImmediately&&(e.visible=!0),n("UPDATE_MODAL",{modal:e,index:o}))},open:function(t,e){(0,t.commit)("SET_VISIBLE",{index:_(e,t.state),visible:!0})},close:function(t,e){var n=t.commit,o=m(e,t.state);o>=0&&n("SET_VISIBLE",{index:o,visible:!1})},remove:function(t,e){var n=t.commit,o=m(e,t.state);o>=0&&(n("SET_COMPONENT",{index:o,component:null}),n("SET_TITLE",{index:o,title:null}),n("SET_ACTIONS",{index:o,actions:[]}),n("SET_DATA",{index:o,data:null}),n("DELETE_MODAL",o))},removeAll:function(t){(0,t.commit)("DELETE_ALL_MODAL")}}})}catch(t){throw new Error("store不是[Vuex.Store]的实例",t)}if(!n)throw new Error("必须提供store才能初始化FxModal");t.prototype.$modal=function(e,i){var r=e.component,l=e.data,a=e.title,c=e.id,s=e.width,d=e.placement,f=e.actions,u=e.btns,p=e.beforeClose,m=e.open,_=void 0===m||m;if(i&&(p&&(p=p.bind(i)),f)){var v={};for(var b in f){var x=f[b];v[b]=x.bind(i)}f=v}var y={id:c||o++,component:r,data:l,title:a,width:s,placement:d,visible:!1,openImmediately:_,actions:f,btns:u,beforeClose:p};return n.dispatch("fxModal/add",y),!0===_&&t.nextTick((function(){n.dispatch("fxModal/open",y)})),{instance:y,close:function(){n.dispatch("fxModal/close",y.id)},open:function(){n.dispatch("fxModal/open",y)}}},t.prototype.$modal.close=function(t){t="object"===i()(t)&&t.instance?t.instance.id:t,n.dispatch("fxModal/close",t)},t.prototype.$modal.closeAll=function(){n.dispatch("fxModal/removeAll")},t.prototype.$modal.get=function(t){var e=n.state.modal.modal_list.find((function(e){return e.id===t}));return e?{instance:e,close:function(){n.dispatch("fxModal/close",e.id)}}:null}};e.default=u},function(t,e){}])}));