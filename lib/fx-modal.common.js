!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vuex")):"function"==typeof define&&define.amd?define(["vuex"],t):"object"==typeof exports?exports["fx-modal"]=t(require("vuex")):e["fx-modal"]=t(e.vuex)}("undefined"!=typeof self?self:this,(function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,t){function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=o=function(e){return typeof e}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}e.exports=o},function(e,t){e.exports=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},function(t,o){t.exports=e},function(e,t,o){"use strict";var n=o(5);o.n(n).a},function(e,t,o){"use strict";o.r(t);var n=o(0),i=o.n(n),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"fx-modals"},e._l(e.modal_list,(function(t){return o("el-dialog",{key:t.id,attrs:{"custom-class":"fx-modal "+t.classes,modal:t.mask,title:t.title,visible:t.visible,width:e.getModalWidth(t),"append-to-body":t.appendToBody,"mask-append-to-body":t.maskAppendToBody,destroyOnClose:t.destroyOnClose,closeOnClickModal:t.closeOnClickMask,fullscreen:t.fullscreen,"before-close":e.getBeforeClose(t),lockScroll:t.lockScroll},on:{close:function(o){return e.onClose(t)},closed:function(o){return e.onClosed(t)}}},[o("div",{staticClass:"fx-modal__body"},[o(t.component,e._g(e._b({ref:"modalComponent_"+t.id,refInFor:!0,tag:"component"},"component",t.data,!1),t.actions))],1),e._v(" "),t.btns&&t.btns.length?o("div",{staticClass:"fx-modal__footer",attrs:{slot:"footer"},slot:"footer"},e._l(t.btns,(function(n,i){return o("el-button",{key:i,attrs:{size:n.size,type:n.type},on:{click:function(o){return e.onModalBtnClick(n,t)}}},[e._v(e._s(n.name))])})),1):e._e()])})),1)};r._withStripped=!0;var l=o(1),a=o.n(l),c=o(2);function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var d={data:function(){return{globalDialog:{title:"Global Dialog",visible:!1}}},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){a()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},Object(c.mapState)({modal_list:function(e){return e.fxModal.modal_list}})),methods:{getModalWidth:function(e){var t=e.width,o=e.placement;return t||("top-right"===o?"25vw":"45vw")},onClose:function(e){this.$store.dispatch("fxModal/close",e.id)},onClosed:function(e){this.$store.dispatch("fxModal/remove",e.id)},getBeforeClose:function(e){var t=this;return function(o){e.beforeClose?e.beforeClose(o,t.$refs["modalComponent_".concat(e.id)][0]):o()}},onModalBtnClick:function(e,t){var o=e.method,n=e.callback;if(!o)return this.onClose(t),void(n&&n.call());var i=this.$refs["modalComponent_".concat(t.id)][0];i&&i[o]&&"function"==typeof i[o]&&(i[o].call(null,n)&&this.onClose(t))}},created:function(){}};o(3);var u=function(e,t,o,n,i,r,l,a){var c,s="function"==typeof e?e.options:e;if(t&&(s.render=t,s.staticRenderFns=o,s._compiled=!0),n&&(s.functional=!0),r&&(s._scopeId="data-v-"+r),l?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},s._ssrRegister=c):i&&(c=a?function(){i.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(s.functional){s._injectStyles=c;var d=s.render;s.render=function(e,t){return c.call(t),d(e,t)}}else{var u=s.beforeCreate;s.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:s}}(d,r,[],!1,null,null,null);u.options.__file="src/FxModal.vue";var f=u.exports;function p(e){for(var t=1,o=arguments.length;t<o;t++){var n=arguments[t]||{};for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];void 0!==r&&(e[i]=r)}}return e}window.merge=p;var m={mask:!0,btns:[{name:"关闭"}],data:null,title:"",width:"50%",height:"auto",placement:"center",actions:null,beforeClose:null,open:!0,fullscreen:!1,destroyOnClose:!1,appendToBody:!1,maskAppendToBody:!0,lockScroll:!0,closeOnClickMask:!0,classes:""};function v(e,t){return t.modal_list[e]||null}function _(e,t){return t.modal_list.findIndex((function(t){return t.id===e}))}function b(e,t){return t.modal_list.findIndex((function(t){return e===t}))}f.install=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.store,n=t.defaultOptions,r=0;e.component(f.name||"FxModal",f),e.FxModal_defaultOptions=p(m,n);try{o.registerModule("fxModal",{namespaced:!0,state:{modal_list:[]},mutations:{ADD_MODAL:function(e,t){e.modal_list.push(t)},UPDATE_MODAL:function(e,t){var o=t.modal,n=t.index,i=e.modal_list[n];for(var r in i)i[r]=o[r]},DELETE_MODAL:function(e,t){e.modal_list.splice(t,1)},DELETE_ALL_MODAL:function(e){e.modal_list=[]},SET_COMPONENT:function(e,t){var o=t.index,n=t.component,i=v(o,e);i&&(i.component=n)},SET_DATA:function(e,t){var o=t.index,n=t.data,i=v(o,e);i&&(i.data=n)},SET_TITLE:function(e,t){var o=t.index,n=t.title,i=v(o,e);i&&(i.title=n)},SET_VISIBLE:function(e,t){var o=t.index,n=t.visible,i=v(o,e);i&&(i.visible=n)},SET_ACTIONS:function(e,t){var o=t.index,n=t.actions,i=v(o,e);i&&(i.actions=n)}},actions:{add:function(e,t){var o=e.commit,n=e.state.modal_list.findIndex((function(e){return e.id===t.id}));n<0?o("ADD_MODAL",t):(!0===t.openImmediately&&(t.visible=!0),o("UPDATE_MODAL",{modal:t,index:n}))},open:function(e,t){(0,e.commit)("SET_VISIBLE",{index:b(t,e.state),visible:!0})},close:function(e,t){var o=e.commit,n=_(t,e.state);n>=0&&o("SET_VISIBLE",{index:n,visible:!1})},remove:function(e,t){var o=e.commit,n=_(t,e.state);n>=0&&(o("SET_COMPONENT",{index:n,component:null}),o("SET_TITLE",{index:n,title:null}),o("SET_ACTIONS",{index:n,actions:[]}),o("SET_DATA",{index:n,data:null}),o("DELETE_MODAL",n))},removeAll:function(e){(0,e.commit)("DELETE_ALL_MODAL")}}})}catch(e){throw new Error("store不是[Vuex.Store]的实例",e)}if(!o)throw new Error("必须提供store才能初始化FxModal");e.prototype.$modal=function(t,n){var i=p(e.FxModal_defaultOptions,t),l=i.component,a=i.data,c=i.title,s=i.id,d=i.width,u=i.closeOnClickMask,f=i.placement,m=i.lockScroll,v=i.fullscreen,_=i.classes,b=i.actions,y=i.appendToBody,x=(i.closeOnClickModal,i.maskAppendToBody),O=i.btns,h=i.beforeClose,C=i.open,T=i.mask;if(n&&(h&&(h=h.bind(n)),b)){var E={};for(var M in b){var S=b[M];E[M]=S.bind(n)}b=E}var g={id:s||r++,component:l,data:a,title:c,width:d,placement:f,visible:!1,openImmediately:C,actions:b,btns:O,beforeClose:h,mask:T,appendToBody:y,maskAppendToBody:x,fullscreen:v,classes:_,closeOnClickMask:u,lockScroll:m};return o.dispatch("fxModal/add",g),!0===C&&e.nextTick((function(){o.dispatch("fxModal/open",g)})),{instance:g,close:function(){o.dispatch("fxModal/close",g.id)},open:function(){o.dispatch("fxModal/open",g)}}},e.prototype.$modal.close=function(e){e="object"===i()(e)&&e.instance?e.instance.id:e,o.dispatch("fxModal/close",e)},e.prototype.$modal.closeAll=function(){o.dispatch("fxModal/removeAll")},e.prototype.$modal.get=function(e){var t=o.state.modal.modal_list.find((function(t){return t.id===e}));return t?{instance:t,close:function(){o.dispatch("fxModal/close",t.id)}}:null}};t.default=f},function(e,t){}])}));